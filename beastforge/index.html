<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>BeastForge ‚Ä¢ Mobile Prototype</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          bg0: "#0b0814",
          bg1: "#120c22",
          card: "#1a1330",
          edge: "#2b1f4e",
          neonPink: "#ff45e6",
          neonBlue: "#00d4ff",
          neonCyan: "#24ffe0",
          neonGreen: "#00ff99",
          neonGold: "#ffd45e",
          neonRed: "#ff5a7a",
          neonPurple: "#8a6bff",
        },
        fontFamily: {
          orbitron: ["Orbitron", "ui-sans-serif", "system-ui"],
          inter: ["Inter", "ui-sans-serif", "system-ui"],
        },
        boxShadow: {
          glowBlue: "0 0 0 2px rgba(0,212,255,.35), 0 0 22px rgba(0,212,255,.35)",
          glowPink: "0 0 0 2px rgba(255,69,230,.35), 0 0 22px rgba(255,69,230,.35)",
          glowGreen: "0 0 0 2px rgba(0,255,153,.35), 0 0 22px rgba(0,255,153,.35)",
          glowGold: "0 0 0 2px rgba(255,212,94,.35), 0 0 22px rgba(255,212,94,.35)",
        },
      },
    },
  };
</script>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js" crossorigin="anonymous"></script>

<style>
  html,body{height:100%;background:#0b0814}
  .gradient-bg{background:
    radial-gradient(1200px 900px at 50% -10%, rgba(138,107,255,.15), transparent 40%),
    radial-gradient(900px 900px at -10% 80%, rgba(0,212,255,.12), transparent 50%),
    radial-gradient(900px 900px at 110% 90%, rgba(255,69,230,.12), transparent 50%),
    linear-gradient(180deg,#0b0814,#120c22 60%);}
  .glass{background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08)}
  .card-neo{background:linear-gradient(180deg, rgba(30,20,60,.9), rgba(18,12,34,.9)); border:1px solid rgba(255,255,255,.08)}
  .ring-neo{box-shadow:inset 0 0 0 1px rgba(255,255,255,.08), 0 0 28px rgba(0,212,255,.18)}
  .btn{transition:transform .08s ease}
  .btn:active{transform:scale(.98)}
  .fade{animation:fade .45s ease both}
  @keyframes fade{from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)}}
  .pulse{animation:pulse 1.6s ease-in-out infinite}
  @keyframes pulse{0%,100%{opacity:.7}50%{opacity:1}}
  .bounce{animation:bounce .8s ease both}
  @keyframes bounce{0%{transform:scale(.92)}70%{transform:scale(1.04)}100%{transform:scale(1)}}
  /* Phone frame sizing so it sits perfectly in Framer embeds */
  .phone {
    width: min(420px, 100vw);
    height: min(900px, 100vh);
  }
  .no-scrollbar::-webkit-scrollbar{display:none}
</style>
</head>
<body class="gradient-bg text-white font-inter">

<!-- Centered "phone" to match your frames -->
<div class="phone mx-auto my-0 relative overflow-hidden rounded-[32px] border border-white/10 ring-neo">

  <!-- Developer demo nav (toggleable) -->
  <div class="absolute top-2 left-2 z-50 text-[11px]">
    <div class="glass rounded-2xl px-2 py-1 hidden sm:flex gap-1">
      <button class="px-2 py-1 rounded bg-white/10 hover:bg-white/20 btn" onclick="go('match')">Match</button>
      <button class="px-2 py-1 rounded bg-white/10 hover:bg-white/20 btn" onclick="go('intro')">Intro</button>
      <button class="px-2 py-1 rounded bg-white/10 hover:bg-white/20 btn" onclick="go('arena')">Arena</button>
      <button class="px-2 py-1 rounded bg-white/10 hover:bg-white/20 btn" onclick="go('forge')">Forge</button>
      <button class="px-2 py-1 rounded bg-white/10 hover:bg-white/20 btn" onclick="go('fusion')">Result</button>
      <button class="px-2 py-1 rounded bg-white/10 hover:bg-white/20 btn" onclick="go('event')">Event</button>
      <button class="px-2 py-1 rounded bg-white/10 hover:bg-white/20 btn" onclick="go('deck')">Deck</button>
      <button class="px-2 py-1 rounded bg-white/10 hover:bg-white/20 btn" onclick="go('victory')">Victory</button>
      <button class="px-2 py-1 rounded bg-white/10 hover:bg-white/20 btn" onclick="go('rewards')">Rewards</button>
    </div>
  </div>

  <!-- SCREENS WRAPPER -->
  <div id="screens" class="absolute inset-0">

    <!-- 1. MATCHMAKING -->
    <section id="screen-match" class="absolute inset-0 p-5 flex flex-col gap-4">
      <header class="flex items-center justify-between">
        <div class="text-xs opacity-70">MATCHMAKING</div>
        <div class="w-6 h-6 rounded-lg grid place-items-center bg-white/10">
          <i class="fa-solid fa-gear text-[12px] opacity-80"></i>
        </div>
      </header>

      <div class="card-neo rounded-3xl p-4 fade">
        <div class="text-center mb-2">
          <button class="mx-auto mb-3 rounded-full px-4 py-2 bg-neonBlue/10 text-neonBlue font-orbitron shadow-glowBlue btn"
                  onclick="startSearch()">
            <i class="fa-solid fa-circle-notch fa-spin mr-2"></i> ENTER THE FORGE
          </button>
          <div class="text-sm opacity-80">Searching for Opponent‚Ä¶</div>
        </div>

        <!-- Opponent slot -->
        <div id="opponentCard" class="hidden mt-3">
          <div class="flex items-center justify-between gap-3">
            <div class="flex items-center gap-2">
              <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-neonPurple/40 to-neonBlue/30 ring-neo grid place-items-center">üõ°Ô∏è</div>
              <div class="text-xs">
                <div class="font-semibold">You</div>
                <div class="opacity-70">Lvl 12</div>
              </div>
            </div>
            <div class="font-orbitron text-xs bg-white/10 px-2 py-1 rounded">VS</div>
            <div class="flex items-center gap-2">
              <div class="text-right text-xs">
                <div class="font-semibold">Stormbreaker</div>
                <div class="opacity-70">Lvl 14</div>
              </div>
              <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-neonPink/40 to-neonGold/30 ring-neo grid place-items-center">‚ö°</div>
            </div>
          </div>

          <div class="mt-3">
            <div class="text-[11px] opacity-70 mb-1">Match Progress</div>
            <div class="h-2 w-full rounded-full bg-white/10 overflow-hidden">
              <div id="mmProgress" class="h-full w-0 bg-gradient-to-r from-neonBlue to-neonPink"></div>
            </div>
          </div>

          <div class="mt-4 glass rounded-2xl p-3 text-[12px]">
            <div class="flex items-start gap-2">
              <div class="w-7 h-7 rounded-lg grid place-items-center bg-neonGold/15 text-neonGold">üí°</div>
              <div>
                <div class="font-semibold mb-0.5">BATTLE TIP</div>
                Combine Fire and Aura to create devastating flame tornadoes that clear multiple zones at once.
              </div>
            </div>
          </div>

          <div class="mt-3 text-center">
            <button class="px-4 py-2 rounded-xl bg-neonPink/15 text-neonPink border border-neonPink/30 btn"
                    onclick="go('intro')">Opponent Found! Enter the Forge</button>
          </div>
        </div>
      </div>

      <div class="mt-auto text-center">
        <button class="opacity-60 text-[12px] hover:opacity-90" onclick="go('deck')">Cancel Search ¬∑ Edit Deck</button>
      </div>
    </section>

    <!-- 2. ARENA INTRO / COUNTDOWN -->
    <section id="screen-intro" class="hidden absolute inset-0 p-6 flex flex-col items-center justify-center text-center">
      <div class="mb-3 font-orbitron text-[15px] opacity-70">ARENA LOADING</div>
      <div class="rounded-[24px] card-neo p-6 w-[86%] max-w-[340px]">
        <div class="flex items-center justify-between mb-4">
          <div class="text-left">
            <div class="text-xs opacity-70">SUMMONER</div>
            <div class="font-semibold">You</div>
          </div>
          <div class="text-[28px] font-orbitron text-neonGold">VS</div>
          <div class="text-right">
            <div class="text-xs opacity-70">SUMMONER</div>
            <div class="font-semibold">Stormbreaker</div>
          </div>
        </div>
        <div class="glass rounded-2xl py-4 mb-3 text-[12px] opacity-90">Summon beasts to control the battlefield.</div>
        <div id="countdown" class="text-[64px] font-orbitron text-neonGold drop-shadow-xl">3</div>
      </div>
    </section>

    <!-- 3. BATTLE ARENA -->
    <section id="screen-arena" class="hidden absolute inset-0 flex flex-col">
      <!-- HUD -->
      <div class="p-3 flex items-center justify-between text-[12px]">
        <div class="glass rounded-xl px-2 py-1">YOU: <span class="text-neonGreen" id="hpMe">100%</span></div>
        <div class="glass rounded-xl px-2 py-1">TIME: <span id="matchTime">90</span>s</div>
        <div class="glass rounded-xl px-2 py-1">ENEMY: <span class="text-neonRed" id="hpEnemy">100%</span></div>
      </div>

      <!-- ARENA GRID -->
      <div class="flex-1 px-5">
        <div class="relative mx-auto max-w-[360px] h-[440px] rounded-[28px] card-neo p-3 ring-neo">
          <div class="grid grid-cols-3 grid-rows-5 gap-2 h-full">
            <!-- 15 tiles -->
            <template id="tileTemplate">
              <div class="rounded-xl bg-white/4 border border-white/8 relative overflow-hidden">
                <div class="absolute inset-0 pointer-events-none opacity-0 transition-opacity"></div>
              </div>
            </template>
          </div>

          <!-- Forge meter (right) -->
          <div class="absolute top-3 -right-3 h-[calc(100%-24px)] w-4 rounded-xl bg-white/10 overflow-hidden">
            <div id="forgeMeter" class="w-full h-0 bg-gradient-to-b from-neonBlue to-neonPink"></div>
          </div>
        </div>
      </div>

      <!-- CARD BELT -->
      <div class="relative pb-3">
        <div class="mx-auto max-w-[360px] bg-black/30 rounded-2xl px-3 py-2">
          <div id="hand" class="flex items-end justify-between gap-2">
            <!-- cards populate via JS -->
          </div>
          <div class="mt-2 flex items-center justify-between text-[11px] opacity-80">
            <div>Energy: <span id="energy">6</span>/10</div>
            <div class="flex gap-2">
              <button class="px-2 py-1 rounded bg-white/10 btn" onclick="toggleCamera()">Cam</button>
              <button class="px-2 py-1 rounded bg-white/10 btn" onclick="quickSpecial()">Special</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 4. FORGE READY -->
    <section id="screen-forge" class="hidden absolute inset-0 p-6 flex flex-col items-center justify-center text-center bg-black/50">
      <div class="font-orbitron text-2xl text-neonGold mb-2">FORGE READY!</div>
      <div class="opacity-80 text-[13px] mb-4">Drag two beasts together (or tap two cards) to preview fusion.</div>
      <div class="glass rounded-2xl p-4 w-[86%] max-w-[340px]">
        <div id="fusionPreview" class="text-sm opacity-80">Select two beasts‚Ä¶</div>
        <button id="confirmFusion" disabled
          class="mt-3 w-full py-2 rounded-xl bg-neonGold/20 text-neonGold border border-neonGold/40 btn disabled:opacity-40">
          Confirm Fusion
        </button>
      </div>
      <button class="mt-4 text-[12px] opacity-80" onclick="go('arena')">Back to battle</button>
    </section>

    <!-- 5. FUSION RESULT -->
    <section id="screen-fusion" class="hidden absolute inset-0 p-6 flex flex-col items-center justify-center text-center">
      <div class="rounded-[28px] card-neo p-6 w-[86%] max-w-[360px] bounce">
        <div class="text-[12px] opacity-70 mb-1">FUSION COMPLETE</div>
        <div class="h-40 rounded-2xl bg-gradient-to-br from-neonBlue/25 to-neonPink/25 grid place-items-center ring-neo mb-3">AquaFlare Titan</div>
        <div class="font-orbitron text-neonCyan text-xl mb-1">AquaFlare Titan Unleashed!</div>
        <div class="text-[12px] text-neonGold mb-3">+20% Damage ‚Ä¢ +10% Speed</div>
        <button class="w-full py-2 rounded-xl bg-neonBlue/20 border border-neonBlue/40 text-neonBlue btn"
                onclick="go('arena')">Back to Arena</button>
      </div>
    </section>

    <!-- 6. MID-BATTLE EVENT -->
    <section id="screen-event" class="hidden absolute inset-0 p-6 flex flex-col items-center justify-center text-center">
      <div class="rounded-[28px] card-neo p-6 w-[86%] max-w-[360px] fade">
        <div class="font-orbitron text-neonBlue text-xl mb-2">Energy Surge</div>
        <div class="opacity-80 text-[13px]">Energy regen doubled for 10s!</div>
        <button class="mt-4 w-full py-2 rounded-xl bg-neonGreen/20 border border-neonGreen/40 text-neonGreen btn"
                onclick="go('arena')">OK</button>
      </div>
    </section>

    <!-- 7. VICTORY / DEFEAT -->
    <section id="screen-victory" class="hidden absolute inset-0 p-6 flex flex-col items-center justify-center text-center">
      <div class="rounded-[28px] card-neo p-6 w-[86%] max-w-[360px] fade">
        <div id="resultTitle" class="font-orbitron text-3xl text-neonGold mb-1">Victory!</div>
        <div class="opacity-80 text-[12px] mb-3">Final blow by AquaFlare Titan</div>
        <div class="glass rounded-xl p-3 text-left text-[12px] space-y-1">
          <div class="flex justify-between"><span>Damage Dealt</span><span>2450</span></div>
          <div class="flex justify-between"><span>Units Forged</span><span>1</span></div>
          <div class="flex justify-between"><span>Avg Energy Use</span><span>92%</span></div>
          <div class="flex justify-between"><span>MVP</span><span>AquaFlare Titan</span></div>
        </div>
        <button class="mt-4 w-full py-2 rounded-xl bg-neonGold/20 border border-neonGold/40 text-neonGold btn"
                onclick="go('rewards')">Claim Rewards</button>
      </div>
    </section>

    <!-- 8. REWARDS -->
    <section id="screen-rewards" class="hidden absolute inset-0 p-6 flex flex-col items-center justify-center text-center">
      <div class="rounded-[28px] card-neo p-6 w-[86%] max-w-[360px] fade">
        <div class="font-orbitron text-2xl text-neonGold mb-2">Rewards</div>
        <div class="grid grid-cols-3 gap-2 text-[12px] mb-3">
          <div class="glass rounded-xl p-3">
            <div class="text-neonGold text-xl">üí∞</div><div>+500</div>
          </div>
          <div class="glass rounded-xl p-3">
            <div class="text-neonCyan text-xl">üí†</div><div>+3 Shards</div>
          </div>
          <div class="glass rounded-xl p-3">
            <div class="text-neonPink text-xl">üÉè</div><div>Ember Lynx</div>
          </div>
        </div>
        <div class="opacity-70 text-[11px] mb-3">Watch ad to double rewards</div>
        <div class="flex gap-2">
          <button class="px-3 py-2 rounded-xl bg-neonBlue/20 border border-neonBlue/40 text-neonBlue btn" onclick="go('level')">Upgrade Beasts</button>
          <button class="px-3 py-2 rounded-xl bg-white/10 btn" onclick="go('match')">Continue</button>
        </div>
      </div>
    </section>

    <!-- 9. LEVEL UP -->
    <section id="screen-level" class="hidden absolute inset-0 p-6 flex flex-col items-center justify-center text-center">
      <div class="rounded-[28px] card-neo p-6 w-[86%] max-w-[360px] fade">
        <div class="font-orbitron text-neonGreen text-xl mb-1">Beast Level-Up</div>
        <div class="opacity-80 text-[13px] mb-2">Ember Lynx ‚Üí Lv. 6</div>
        <div class="glass rounded-xl p-3 text-neonGold text-[12px]">+10% Damage</div>
        <button class="mt-4 w-full py-2 rounded-xl bg-neonGreen/20 border border-neonGreen/40 text-neonGreen btn"
                onclick="go('deck')">Go to Deck</button>
      </div>
    </section>

    <!-- 10. DECK OVERVIEW / MANAGEMENT -->
    <section id="screen-deck" class="hidden absolute inset-0 p-5 flex flex-col gap-3">
      <header class="flex items-center justify-between">
        <div class="text-xs opacity-70">DECK FORGE</div>
        <button class="px-3 py-1 rounded-lg bg-neonBlue/15 border border-neonBlue/30 text-neonBlue btn text-[12px]"
                onclick="go('match')">Battle Now</button>
      </header>

      <div class="card-neo rounded-3xl p-4">
        <div class="flex items-center justify-between mb-3">
          <div>
            <div class="text-[12px] opacity-70">MY DECK</div>
            <div class="font-orbitron">Elemental Storm</div>
          </div>
          <span class="px-2 py-1 rounded bg-neonGreen/15 text-neonGreen text-[11px]">ACTIVE</span>
        </div>

        <div class="grid grid-cols-4 gap-2">
          <!-- owned cards -->
          <template id="ownedCardTmpl">
            <div class="rounded-xl h-20 bg-gradient-to-br from-neonPurple/20 to-neonBlue/20 grid place-items-center text-[11px] border border-white/10">Card</div>
          </template>
        </div>

        <div class="mt-3 glass rounded-2xl p-3 text-[12px]">
          <div class="flex justify-between"><span>Deck Cost</span><span>32</span></div>
          <div class="flex justify-between"><span>Win Rate</span><span class="text-neonGreen">73%</span></div>
        </div>

        <div class="mt-3 flex gap-2">
          <button class="flex-1 py-2 rounded-xl bg-white/10 btn">Copy Deck</button>
          <button class="flex-1 py-2 rounded-xl bg-neonPink/15 border border-neonPink/30 text-neonPink btn"
                  onclick="go('match')">Ready for Battle</button>
        </div>
      </div>
    </section>

  </div>
</div>

<script>
  // Simple screen router
  const map = {
    match: "screen-match",
    intro: "screen-intro",
    arena: "screen-arena",
    forge: "screen-forge",
    fusion: "screen-fusion",
    event: "screen-event",
    victory: "screen-victory",
    rewards: "screen-rewards",
    level: "screen-level",
    deck: "screen-deck",
  };
  function go(name){
    for(const id of Object.values(map)){
      const el = document.getElementById(id);
      el.classList.add("hidden");
    }
    document.getElementById(map[name]).classList.remove("hidden");
  }

  // --- Matchmaking flow ---
  function startSearch(){
    const opp = document.getElementById("opponentCard");
    opp.classList.remove("hidden"); opp.classList.add("fade");
    let p=0; const bar = document.getElementById("mmProgress");
    const itv = setInterval(()=>{
      p = Math.min(100, p + Math.random()*12);
      bar.style.width = p + "%";
      if(p>=100){ clearInterval(itv); }
    }, 280);
  }

  // --- Intro countdown ---
  function startIntro(){
    let c = 3; const el = document.getElementById("countdown");
    const t = setInterval(()=>{
      c--; el.textContent = c>0? c : "FIGHT!";
      if(c<0){ clearInterval(t); setTimeout(()=>{ go("arena"); startArena(); }, 700); }
    }, 900);
  }

  // --- Arena setup ---
  const cards = [
    {name:"FIRE DRAKE", cost:3, color:"neonPink"},
    {name:"ICE WULF", cost:2, color:"neonBlue"},
    {name:"EARTH GOLEM", cost:3, color:"neonGreen"},
    {name:"STORM EAGLE", cost:2, color:"neonCyan"},
    {name:"EMBER LYNX", cost:1, color:"neonGold"},
  ];
  let energy = 6;
  let forge = 0;
  let selectA = null, selectB = null;

  function buildArena(){
    // tiles
    const grid = document.querySelector("#screen-arena .grid");
    grid.innerHTML = "";
    for(let i=0;i<15;i++){
      const tmpl = document.getElementById("tileTemplate").content.cloneNode(true);
      grid.appendChild(tmpl);
    }
    // hand
    const hand = document.getElementById("hand");
    hand.innerHTML = "";
    cards.forEach((c, idx)=>{
      const color = c.color;
      const card = document.createElement("button");
      card.className = `flex-1 h-24 rounded-xl border border-white/10 bg-gradient-to-br from-${color}/25 to-white/5 btn relative`;
      card.innerHTML = `
        <div class="absolute top-1 left-1 text-[10px] opacity-70">${c.cost}</div>
        <div class="w-full h-full grid place-items-center text-[10px] font-semibold px-1 text-center">${c.name}</div>`;
      card.onclick = ()=>selectCard(idx, card, color);
      hand.appendChild(card);
    });
    updateBars();
  }

  function updateBars(){
    document.getElementById("energy").textContent = energy;
    document.getElementById("forgeMeter").style.height = Math.min(100, forge) + "%";
    if(forge>=100){ go("forge"); }
  }

  function selectCard(i, el, color){
    // tap two to prepare fusion preview
    if(selectA===null){ selectA = i; el.classList.add("shadow-glowPink"); }
    else if(selectB===null && i!==selectA){ selectB = i; el.classList.add("shadow-glowBlue"); openFusionPreview(); }
    else { // reset
      selectA = selectB = null;
      document.querySelectorAll("#hand button").forEach(b=>b.classList.remove("shadow-glowPink","shadow-glowBlue"));
      document.getElementById("confirmFusion")?.setAttribute("disabled","true");
      document.getElementById("fusionPreview").textContent = "Select two beasts‚Ä¶";
      go("arena");
    }
  }

  function quickSpecial(){
    forge = Math.min(100, forge + 18);
    updateBars();
  }

  function toggleCamera(){
    // purely visual easter egg
    document.querySelector("#screen-arena .card-neo").classList.toggle("ring-neo");
  }

  function openFusionPreview(){
    const a = cards[selectA], b = cards[selectB];
    go("forge");
    const fp = document.getElementById("fusionPreview");
    fp.innerHTML = `<div class="text-left">
      <div class="text-[11px] opacity-70 mb-1">Preview</div>
      <div class="grid grid-cols-3 gap-2 items-center">
        <div class="rounded-lg py-2 text-center bg-${a.color}/20 border border-white/10 text-[11px]">${a.name}</div>
        <div class="text-neonGold text-[12px] font-orbitron">+</div>
        <div class="rounded-lg py-2 text-center bg-${b.color}/20 border border-white/10 text-[11px]">${b.name}</div>
      </div>
      <div class="mt-2 text-[12px] opacity-80">Result: <span class="text-neonCyan font-semibold">AquaFlare Titan</span></div>
    </div>`;
    document.getElementById("confirmFusion").removeAttribute("disabled");
  }

  document.getElementById("confirmFusion").addEventListener("click", ()=>{
    // replace two cards with fused
    const fused = {name:"AQUAFLARE TITAN", cost:4, color:"neonCyan"};
    const min = Math.min(selectA, selectB), max = Math.max(selectA, selectB);
    cards.splice(max,1); cards.splice(min,1); cards.unshift(fused);
    selectA = selectB = null;
    forge = 0;
    buildArena();
    go("fusion");
    setTimeout(()=>go("arena"), 1200);
  });

  // Match timer + scripted events
  function startArena(){
    let t=90;
    const tick = setInterval(()=>{
      document.getElementById("matchTime").textContent = t;
      if(t===70){ go("event"); setTimeout(()=>go("arena"), 800); }
      if(t===45){ forge = 100; updateBars(); } // trigger forge ready
      if(t<=0){ clearInterval(tick); go("victory"); }
      t -= 1;
    }, 400);
  }

  // Deck screen owned cards
  function buildDeck(){
    const grid = document.querySelector("#screen-deck .grid");
    grid.innerHTML = "";
    const names = ["FIRE DRAKE","ICE WULF","EARTH GOLEM","STORM EAGLE","EMBER LYNX","BLAZE WYRM","TERRA STAG","MIST NYX"];
    names.forEach((n,i)=>{
      const el = document.getElementById("ownedCardTmpl").content.cloneNode(true);
      el.querySelector("div").textContent = n;
      grid.appendChild(el);
    });
  }

  // Populate arena tiles once
  function mountTiles(){
    const grid = document.querySelector("#screen-arena .grid");
    if(grid.children.length===0){
      for(let i=0;i<15;i++){
        const tmpl = document.getElementById("tileTemplate").content.cloneNode(true);
        grid.appendChild(tmpl);
      }
    }
  }

  // boot
  go("match");
  buildDeck();
  mountTiles();

  // enter intro when user presses "Opponent Found" (handled in card)
  // also auto-run intro if user uses dev menu
  const introObserver = new MutationObserver((list)=>{
    list.forEach(m=>{
      if(m.target.id==="screen-intro" && !m.target.classList.contains("hidden")) startIntro();
      if(m.target.id==="screen-arena" && !m.target.classList.contains("hidden")) { buildArena(); startArena(); }
    });
  });
  introObserver.observe(document.getElementById("screens"), {subtree:true, attributes:true, attributeFilter:["class"]});
</script>
</body>
</html>
